#### spring boot与maven的区别
spring boot整合了spring与springMVC，自带tomcat。

创建spring boot项目时artifact不能大写，必须全部小写。

maven只有一个空的pom.xml，需要依赖时必须手动添加依赖。

maven的主要作用是：依赖，聚合(pom)，继承，聚合下有jar、war。

只需要bean和接口的时候，创建maven项目即可。
#### 线上部署vue页面
将vue的页面进行编译(npm run build命令 生成dist文件夹)，将dist文件夹放入nginx(或者在nginx中创建一个文件夹，
将dist文件夹内的东西放入创建的文件夹内)，做一个静态代理，然后修改nginx.conf，最后修改hosts文件(IP地址 域名)。
#### spring boot核心注解
@SpringBootApplication：spring boot的启动配置注解，此注解的源码中的@EnableAutoConfiguration为自动配置自动装配功能。

@SpringBootApplication源码中的注解有：

@Target({ElementType.TYPE})

@Retention(RetentionPolicy.RUNTIME)

@Documented

@Inherited

@SpringBootConfiguration

@EnableAutoConfiguration

@ComponentScan
#### spring(不重复造轮子)
IOC：IOC不是一种技术，只是一种思想，一个重要的面向对象编程的法则，它能指导我们如何设计出松耦合、更优良的程序。
传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试；有了IOC容器后，
把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，所以对象与对象之间是 松散耦合，这样也方便测试，
利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。

AOP的使用场景：日志(记录用户的行为、商品浏览的次数、后台用户的操作等)、事务。
### 注意
实体类必须序列化而且提供get和set方法。

添加事务(启动类添加@EnableTransactionManagement注解，并且在实现类添加@Transactional注解)

包名为bean、pojo、entity、domain、vo、dto的，里面存放的都是实体类。

缓存管理：先更新数据库，再删除缓存，然后从数据库查询后放入缓存。

RPC：远程过程调用(web应用与服务器不在同一个网络之内，不同服务之间相互调用) ，
可以使用nginx中的iphash算法映射出服务器的位置

单一架构(访问量小)：JSP + Servlet + Tomcat

mybatis(半自动的ORM框架，手动编写sql语句)，mybatis底层是对jdbc的高度封装，
封装了connection、PrepareStatement、recourseSet，并且配置了数据源和连接池，通过xml映射实现。
替换了单一架构的DBUtils工具类。

springMVC可以与spring无缝整合，是spring的子容器，而且相对于struct2安全性好。

项目架构采用SOA架构，使用dubbo做远程过程调用，使用zookeeper做注册中心。dubbo本质是一个jar包，是一个应用程序。
dubbo的网络传输层使用netty(基于事件驱动的异步网络应用框架)框架传输数据。

dubbo官网推荐使用zookeeper做注册中心。spring cloud中可以把nacos作为注册中心替换eureka。

dubbo如何工作：把provider加载到容器中由spring管理，把provider注册到注册中心上，
consumer从注册中心异步的获取到provider的地址，consumer得到地址后去同步的调用provider。

dubbo如何使用：两个注解，两个配置。(接口实现类使用@Service注解暴露服务提供者，application.properties配置文件中
添加共享配置(服务名称、协议、端口等)，接口使用@Reference注解指定服务消费者，application.properties配置文件中添加共享配置)

以bean、pojo、entity、domain命名的包中存放的都为实体类。

dubbo中建议在provider端配置的consumer端属性有：
timeout：方法调用的超时时间
retries：失败重试次数，缺省是2
loadbalance：负载均衡算法(dubbo为什么可以实现调度和治理服务的原因)，缺省是随机random，还可以配置轮询、最不活跃优先和一致性哈希等。
actives：消费者端的最大并发调用限制

dubbo在provider端配置的provider端属性有：
threads：服务线程池大小
executes：一个服务提供者并行执行请求上限，即当provider对一个服务的并发调用达到上限后，新调用会阻塞，此时consumer可能会超时。

service和controller在同一个项目中可以使用@Autowired注解相互调用，在不同项目中使用RPC框架调用。

mapper通常都写在服务层(gmall-user-manage、gmall-xxx-service)而不把他写在控制层(gmall-xxx-web)。gmall-xxx-web通常只写控制器。

确保服务提供者能够发送到注册中心可以通过dubbo的监控中心查看，也可以使用zookeeper的客户端查看。

跨域方案：@CrossOrigin、httpClient、jsonp等。

事务分为两种：声明式事务、编程式事务。
#### 把项目从eclipse迁移到IDEA
第一步：在application.properties中配置以下内容：

spring.mvc.view.suffix=.jsp

spring.mvc.view.prefix=/WEB-INF/jsp/

第二步：在pom.xml中添加jsp的依赖

<!--springboot tomcat jsp 支持开启-->
<dependency>
       <groupId>org.apache.tomcat.embed</groupId>
       <artifactId>tomcat-embed-jasper</artifactId>
</dependency>
<dependency>
       <groupId>javax.servlet</groupId>
       <artifactId>jstl</artifactId>
       <scope>compile</scope>
</dependency>

#### 如何搭建dubbo环境
安装jdk：安装之前卸载掉原有的jdk。解压jdk的压缩包，修改profile文件(vim /etc/profile),刷新文件(source /etc/profile)。

安装zookeeper：导入压缩包并解压，复制zoo.cfg(cp zoo_sample.cfg zoo.cfg),然后启动zookeeper(./zkServer.sh start)。
测试(ps -ef |grep zookeeper)。

安装监控中心：dubbo-admin-2.6.0.war就是监控中心(本质是一个动态web工程，war包)，运行必须依赖tomcat服务器。，启动tomcat，
然后将dubbo-admin-2.6.0.war放在webapps目录中，然后关闭tomcat，并删除dubbo-admin-2.6.0.war包。再重启tomcat。
访问监控中心(服务器的IP:8080/dubbo-admin,默认用户名为：root，密码为：root)，此项目的dubbo版本为2.6.0。
#### 后台系统(制作商品)
用后台页面作为支撑，(后台使用vue写，主要关注接口，接口文档会规范当前的控制器是谁，返回值是什么，接口由项目经理写)。
商品的平台属性管理：后台商品功能开发：http://localhost:8082/getCatalog1
#### 项目模块分析
首页，全文检索(关键字检索)，分类检索，(设置两个检索是为了提高用户的体验度，为不同用户提供服务)，商品详情，购物车，登录，
订单，支付，后台系统，   库存系统，物流系统，评论系统，客服系统……
#### 商品的基本知识
商品分类：前台的分类数据信息可以从json文件获取，后台管理的分类信息从数据库获取。
对应的数据库表：baseCatalog1，baseCatalog2，baseCatalog3(不设计为一张表是因为项目为互联网项目，速度要快)。

平台属性与平台属性值为1：n的关系，用于过滤。表结构(与表baseCatalog3相关)：baseAttrInfo：baseAttrValue。
每个商品的每种属性都有对应的属性值。

销售属性在商品详情页面，销售属性与销售属性值为1：n的关系，用于给用户提供商品选择。
例如：销售属性：颜色   销售属性值：幻影蓝、幻夜黑、冰岛白、蓝水翡翠(四组图片来自于SPU图片)。
SPU：一组可复用、易检索的标准化信息集合。(例如：手机、笔记本、小米、华为、锤子(品牌)手机、小米、华为笔记本)

SKU：每种商品均对应有唯一的编号。(例如：Apple iPhone 11 (A2223) 128G 红色 移动联通电信4G手机 双卡双待、
荣耀MagicBook 2019 英特尔酷睿i5 14英寸轻薄笔记本电脑 (i5 8G 512G MX250 FHD) 冰河银)
例如：SKU01：8 + 128G，官方标配，蓝水翡翠
      SKU02：8 + 256G，官方标配，蓝水翡翠 
      
SKU的图片资源都是来自SPU。制作商品的时候，先有SPU，才会有SKU。     
#### 模块配置
修改pom.xml中parent中的version为1.5.10，即使用spring boot1.x的版本。添加通用mapper的坐标。
#### spring boot1.x与spring boot2.x版本的区别
spring boot1.x遵循spring4.0的规则，因为Spring与springMVC为父子容器关系，所以springMVC的版本也为4.0。
启动时控制台会显示自带的error控制器，自带的tomcat版本为8，对thymeleaf支持有变化，html标签必须为双标签

spring boot2.x遵循spring5.0的规则，因为Spring与springMVC为父子容器关系，所以springMVC的版本也为5.0。
启动时控制台不会显示自带的error控制器，自带的tomcat版本为9。
#### spring4.0与spring5.0的区别
spring4.0：拦截器实现方式有：继承和实现两种方式。

spring5.0：拦截器实现方式有：要求JDK版本最低为Java8，支持JUnit5并且兼容JUnit4，支持函数式编程。
#### 功能开发流程
第一步(数据访问层)：从数据库中找对应的表，创建对应的bean，然后写interface，再写mapper(使用通用mapper可以把interface和mapper合并)

第二步(服务层)：创建service与serviceImpl 

第三步(控制层(承载数据模型与页面渲染))：创建控制器controller 
#### 通用mapper的使用
1. 添加通用mapper的坐标，添加依赖

2. 创建实体类

3. 创建接口并继承通用mapper(泛型为实体类)

4. 在启动类添加mapper扫描！！！

5. 编写服务层及实现类，实现类调用mapper

6. 编写控制器，控制器调用服务层

7. 配置数据源！！！

8. 测试
##### 通用mapper的用法
select(UserInfo userInfo) 相当于属性的等值查询

selectOne(UserInfo userInfo) 登录

selectAll() 查询所有

selectByExample(Object example) 查询范围数据或等值数据

selectByPrimaryKey() 根据主键查询

insertSelective(userInfo) 选择性的添加

delete(UserInfo userInfo) 等值删除

deleteByPrimaryKey(Object key) 根据主键删除

deleteByExample(Object example) 范围或等值删除

updateByExampleSelective(userInfo, example) 根据条件修改(第一个参数表示要修改的数据，第二个参数表示修改的条件)
#### 测试
使用debug模式测试，第一种：直接在控制器中打断点；第二种：在控制器中找实现类，在实现类中打断点，使用F7或F8跟踪信息。
#### 数据库结构
base_attr_info 平台属性表
base_attr_value 平台属性值表
base_catalog1 一级分类表
base_catalog2 二级分类表
base_catalog3 三级分类表
-----------------SPU----------------
spu_info 商品表  小米、华为、荣耀、pixel(商品的品牌)
spu_sale_attr 商品的销售属性表
spu_sale_attr_value 商品的销售属性值表
base_sale_attr 销售属性字典表
spu_image 商品图片表
spu_poster 商品海报表 (存储的是图片的url路径)
-----------------SKU----------------
sku_info 库存单元表 (sku_info.spu_id=spu.id)
sku_image 库存单元图片表 (sku_image.spu_image_id=spu_image.id)
sku_sale_attr_value sku与销售属性值的中间表 (每个商品都有自己的销售属性值)
sku_attr_value sku与平台属性值的中间表

多表关联查询：1.找出业务需要的表；2.找出表与表的关联方式(根据业务需求)；3.找出关联条件；4.测试SQL语句。
#### mybatis多表关联查询
使用xml配置文件或者使用注解，重要的两个配置文件：mybatis-cfg.xml(核心配置文件，里面配置数据源、映射文件
映射文件：
<mappers>
    <mapper resource="/com/brevity/mapper/xxxMapper.xml">
    <mapper resource="/com/brevity/mapper/xxxMapper.xml">
        ……
<mappers>

包扫描(包下面有xxxMapper.xml(相当于接口的实现类)，xxxMapper.java文件(相当于接口文件)，并且两个文件名必须一致)：
<mappers>
    <package name="com.brevity.mapper">)，
<mappers>  
  
xxxMapper.xml(映射文件，实体类和mapper的映射文件，里面使用select、insert、update、delete标签，标签内写SQL语句)。

并且在配置文件中配置扫描mapper.xml文件、驼峰命名转换，使xml文件与java文件关联起来。
























































